<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Boostrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Simple Header</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse container-fluid justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="btn btn-primary mx-1 px-3 text-light" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-decoration-none mx-1 px-3 text-primary fw-semibold" href="#">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-decoration-none mx-1 px-3 text-primary fw-semibold" href="#">Pricing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-decoration-none mx-1 px-3 text-primary fw-semibold" href="#">FAQs</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-decoration-none mx-1 text-primary fw-semibold" href="#">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <section class="justify-content-center d-grid z-3">
        <div class="deskripsi text-center">
          <img src="bootstrap-logo.svg.png" alt="bootstrap" />
          <p class="fs-2 fw-semibold pt-5">Create Product</p>
          <span class="fs-5 fw-lighter"
            >Below is an example form built entirely with Bootstrapâ€™s form controls. Each required form group has a validation state that can be triggered by attempting to submit the form without completing it.</span
          >
        </div>
        <form action="" class="container-fluid mt-5 was-validated" id="myForm">
          <h3 class="mb-3">Detail Product</h3>
          <div class="mb-3 col-md-6 col-sm-8">
            <label for="product_name" class="form-label has-validation">Product Name</label>
            <input type="text" name="product_name" class="form-control" id="product_name" required />
            <span class="text-danger" id="nama-error"></span>
          </div>
          <div class="mb-3 col-md-4 col-sm-6 has-validation">
            <label for="product_category" class="form-label">Product Category</label>
            <select name="product_category" class="form-select" id="product_category" required>
              <option selected disabled value="">Pilih kategori produk</option>
              <option value="1">Category 1</option>
              <option value="2">Category 2</option>
              <option value="3">Category 3</option>
              <span id="nama-error"></span>
            </select>
          </div>
          <div class="mb-3 col-md-4 col-sm-6 has-validation">
            <label for="image" class="form-label">Image</label>
            <input type="file" name="image" class="form-control" id="image" required />
            <span id="nama-error"></span>
          </div>
          <div class="mb-3 col-md-4 col-sm-6 form-check has-validation">
            <label class="pb-1 form-label">Product Freshness</label>
            <div class="form-check">
              <input type="radio" class="form-check-input" id="product_freshness" value="brandNew" name="radio-stacked" required />
              <label for="brandNew" class="form-check-label">Brand New</label>
              <span id="nama-error"></span>
            </div>
            <div class="form-check">
              <input type="radio" class="form-check-input" id="product_freshness" value="secondHand" name="radio-stacked" />
              <label for="secondHand" class="form-check-label">Second Hand</label>
              <span id="nama-error"></span>
            </div>
            <div class="form-check">
              <input type="radio" class="form-check-input" id="product_freshness" value="refurbished" name="radio-stacked" />
              <label for="refurbished" class="form-check-label">Refurbrished </label>
              <span id="nama-error"></span>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Additional Description</label>
            <textarea class="form-control" id="description" rows="10" required></textarea>
            <span id="nama-error"></span>
          </div>
          <div class="mb-5 has-validation">
            <label for="productPrice" class="form-label">Product Price</label>
            <input type="number" name="price" class="form-control" id="product_price" placeholder="$1" required />
            <span id="nama-error"></span>
          </div>
          <button type="submit" id="submit_button" class="btn btn-primary w-100 mb-5" onclick="validasiInput()">Submit</button>
        </form>
      </section>
    </div>
    <div class="container">
      <h2 class="text-center fw-bold fs-2">List Product</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Product Name</th>
            <th scope="col">product category</th>
            <th scope="col">Image of Product</th>
            <th scope="col">Product Freshness</th>
            <th scope="col">Additional Description</th>
            <th scope="col">Product Price</th>
          </tr>
        </thead>
        <tbody id="tabel_data"></tbody>
      </table>
      <input type="text" class="form-control w-25 mb-3" id="search" placeholder="Search..." />
      <button class="btn btn-danger" id="delete">Delete</button>
      <button class="btn btn-primary" id="searchBtn">Search</button>
      <br /><br />
    </div>
    <script>
      document.getElementById('submit_button').addEventListener('click', function (event) {
        event.preventDefault();
      });

      function validasiInput() {
        //variabel validasi input createProduct
        var product_name = document.getElementById('product_name').value;
        var product_category = document.getElementById('product_category').value;
        var product_image = document.getElementById('image').value;
        var product_freshness = document.getElementById('product_freshness').value;
        var product_description = document.getElementById('description').value;
        var product_price = document.getElementById('product_price').value;
        var submit_button = document.getElementById('submit_button');
        let batasInputProductName = 25;
        let batasPeringatanProductName = 10;
        var inputValid = true;
        var simbol = /^[a-zA-Z0-9 ]*$/;

        //validasi input createProduct
        if (product_name.length > batasInputProductName) {
          alert('Nama Produk tidak boleh melebihi 25 Huruf!');
          inputValid = false;
        } else if (product_name.length > batasPeringatanProductName) {
          alert('Last Name must not exceed 25 characters.');
        } else if (!simbol.test(product_name)) {
          alert('Name must not contain symbols.');
          inputValid = false;
        } else if (!product_name || !product_price) {
          alert('Please enter a valid Prouct name.');
          inputValid = false;
        }

        //validasi jika input kosong
        if (!product_category || !product_image || !product_freshness || !product_description) {
          alert('The xxx field must be filled in');
          inputValid = false;
        }

        //validasi submit disable
        if (!inputValid) {
          submit_button.disabled = true;
        } else {
          submit_button.disabled = false;
          alert('Product Name: ' + product_name + ' ,Cateogry: ' + product_category + ' ,Image: ' + product_image + ' ,Product Freshness: ' + product_freshness + ' ,Description: ' + product_description + ' ,Price: ' + product_price);
        }

        //menjalankan fungsi tambahData
        tambahData(product_name, product_category, product_image, product_freshness, product_description, product_price);
      }

      //variabel data tabel
      const dataTable = [];
      var tabel_data = document.getElementById('tabel_data');
      let row;
      var deleteBtn = document.getElementById('delete');
      var search = document.getElementById('search');
      var searchBtn = document.getElementById('searchBtn');

      //fungsi tambahData
      function tambahData(product_name, product_category, product_image, product_freshness, product_description, product_price) {
        tabel_data.innerHTML = '';
        let filename = product_image.split('\\').pop();
        dataTable.push([product_name, product_category, filename, product_freshness, product_description, product_price]);
        dataTable.forEach((datas, baris) => {
          let no = baris + 1;
          row = tabel_data.insertRow();
          row.insertCell().innerHTML = no;
          datas.forEach((item) => {
            row.insertCell().innerHTML = item;
          });
        });
      }

      //validasi search data tabel
      searchBtn.addEventListener('click', () => {
        let dataDitemukan = false;
        dataTable.forEach((datas) => {
          if (datas[0] === search.value) {
            return (dataDitemukan = true);
          }
        });
        if (dataDitemukan) {
          alert('Data ' + search.value + ' Tersedia');
        }
      });
      deleteBtn.addEventListener('click', () => {
        const baris_terakhir = data.length - 1;
        tabel_data.deleteRow(baris_terakhir);
        dataTable.pop();
      });

      //variabel jika tidak memasukan input
      const namaInput = document.getElementById('product_name');
      const description = document.getElementById('description');
      const price = document.getElementById('product_price');
      const namaError = document.getElementById('nama-error');

      //memberikan error jika input kosong
      namaInput.addEventListener('blur', function () {
        if (namaInput.value.length == '') {
          namaError.innerHTML = '<i class="fas fa-times"></i> Wajib di Isi';
        }
      });
      description.addEventListener('blur', function () {
        if (description.value.length == '') {
          namaError.innerHTML = '<i class="fas fa-times"></i> Wajib di Isi';
        }
      });
      price.addEventListener('blur', function () {
        if (price.value.length == '') {
          namaError.innerHTML = '<i class="fas fa-times"></i> Wajib di Isi';
        }
      });
    </script>

    <!-- cdn -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
  </body>
</html>
